<!--
  Generated template for the MyMedication page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Meine Medikation</ion-title>
  </ion-navbar>

</ion-header>

<ion-content>
  <ion-card>
    <ion-card-header (click)="toggleContent(1)" class="clickAbleHeader">
      Meine momentanen Medikamente
    </ion-card-header>


    <ion-card-content [ngClass]="{'hidden': toggleObject != 1}">
      <div class="medItem" *ngFor="let drug of drugList">
        <ion-grid *ngIf=drug?.Id>
          <ion-row>
            <ion-col>
              <b>{{drug?.title}}</b>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-5><img src="https://index.hcisolutions.ch/files/pics/{{drug?.Id}}_PIF_F.jpg?px=128&key=Pharmacode" alt="Description" /></ion-col>
            <ion-col class="nextToImage" col-7>
              <span *ngIf=drug?.TkgRsn>Grund:
            {{drug.TkgRsn}}</span>
              <br>
              <span *ngIf=drug?.Pos[0].DtFrom>von: {{drug.Pos[0].DtFrom}}</span>
              <br>
              <span *ngIf=drug?.Pos[0].DtTo>bis: {{drug.Pos[0].DtTo}}</span><br>

            </ion-col>

          </ion-row>
          <ion-row>
            <ion-col class="perDayItem" *ngFor="let day of drug?.Pos[0].D; let i = index">{{perDay[i]}}: {{day}}
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col *ngIf=drug?.AppInstr class="manualItem">
              Anleitung: {{drug.AppInstr}}
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col class="prescItem">
              Verschrieben von: {{drug?.PrscbBy}}
              <div class="delete" (click)="deleteDrug(drug.Id)" *ngIf="drug?.AutoMed"></div>
            </ion-col>
          </ion-row>

        </ion-grid>
      </div>
    </ion-card-content>
  </ion-card>
  <!--......................MEDIKAMENT NEU ERFASSEN.......................-->
  <ion-card>
    <ion-card-header class="clickAbleHeader" (click)="toggleContent(2)">
      Neues Medikament erfassen
    </ion-card-header>
    <ion-card-content [ngClass]="{'hidden': toggleObject != 2}">
      <h3 style="margin-top:10px;">Warum nimmst du dieses Medikament?</h3>
      <ion-item>
        <ion-label color="primary">dein Grund:</ion-label>
        <ion-input [(ngModel)]="reason" placeholder="Beispiel"></ion-input>
      </ion-item>
      <h3 style="margin-top:10px;">Um welche Uhrzeiten m√∂chten Sie erinnert werden?</h3>
      <ion-item>
        <ion-label>Morgens um: {{sMorning}}</ion-label>
        <ion-checkbox [(ngModel)]="morning" color="" checked="false"></ion-checkbox>
      </ion-item>
      <ion-item>
        <ion-label>Mittags um: {{sMidday}}</ion-label>
        <ion-checkbox [(ngModel)]="midday" color="" checked="false"></ion-checkbox>
      </ion-item>
      <ion-item>
        <ion-label>Abends um: {{sEvening}} </ion-label>
        <ion-checkbox [(ngModel)]="evening" color="" checked="false"></ion-checkbox>
      </ion-item>
      <ion-item>
        <ion-label>Vor zu Bett gehen:{{sNight}} </ion-label>
        <ion-checkbox [(ngModel)]="night" color="" checked="false"></ion-checkbox>
      </ion-item>
      <h3 style="margin-top:10px;">Scannen Sie den Barcode des Medikamentes ein:</h3>
      <ion-grid>
        <ion-row>
          <ion-col>
            <button ion-button full (click)="scanMedBox()">StrichCode Scannen</button>
          </ion-col>
        </ion-row>
      </ion-grid>
      <h3 style="margin-top:10px;">  Oder erfassen sie das Medikament ohne Barcode:</h3>
      <ion-grid>
        <ion-row>
          <ion-col>
            <button ion-button full (click)="setMedicationWithoutScanning()">ohne Scanning erfassen</button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <ion-card >
    <ion-card-header class="clickAbleHeader" (click)="toggleContent(3)">
      Einstellungen
    </ion-card-header>
    <ion-card-content [ngClass]="{'hidden': toggleObject != 3}">
    <ion-item>
      <ion-label>Morgens um:</ion-label>
      <ion-datetime displayFormat="HH:mm" [(ngModel)]="sMorning"></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>Mittags um:</ion-label>
      <ion-datetime displayFormat="HH:mm" [(ngModel)]="sMidday"></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>Abends um:</ion-label>
      <ion-datetime displayFormat="HH:mm" [(ngModel)]="sEvening"></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>Nachts um:</ion-label>
      <ion-datetime displayFormat="HH:mm" [(ngModel)]="sNight"></ion-datetime>
    </ion-item>

    <ion-list>
      <ion-item>
        <ion-label>Ton</ion-label>
        <ion-select [(ngModel)]="sound">
          <ion-option value="1">Android Standart</ion-option>
          <ion-option value="2">Vogelgezwischer</ion-option>
          <ion-option value="3">Muh</ion-option>
        </ion-select>
      </ion-item>
    </ion-list>


    <button ion-button full (click)=saveTakingTimes()>Einstellungen Speichern</button>
    </ion-card-content>
  </ion-card>

</ion-content>
